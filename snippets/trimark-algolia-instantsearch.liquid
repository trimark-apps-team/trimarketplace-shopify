<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8.5.1/themes/reset-min.css" integrity="sha256-KvFgFCzgqSErAPu6y9gz/AhZAvzK48VJASu3DpNLCEQ=" crossorigin="anonymous">
<link
  rel="stylesheet"
  href="{{ 'trimark-algolia-instantsearch-overrides.css' | asset_url }}"
>
<script defer>
document.addEventListener('DOMContentLoaded', () => {

const {
    algoliasearch,
    instantsearch,
    searchBox,
    clearRefinements,
    refinementList,
    hits,
    pagination,
    configure,
  } = algoliaShopify.externals;

  console.log("algoliasearch", algoliasearch)


  const searchClient =
    algoliaShopify.searchClient ||
    algoliasearch(
      algoliaShopify.config.app_id,
      algoliaShopify.config.search_api_key
    );

  const search = instantsearch({
    indexName: `${algoliaShopify.config.index_prefix}products`,
    searchClient,
  });

search.addWidgets([
  instantsearch.widgets.clearRefinements({
    container: "#clear-refinements",
  }),

  instantsearch.widgets.refinementList({
    container: "#brand-list",
    attribute: "brand",
  }),

  instantsearch.widgets.configure({
    hitsPerPage: 8,
  }),
]);

  search.start();
});
</script>