{% comment %}
  Facets snippet for Algolia search
  - JS will populate the filters and counts
  - Keeps same classes, drawer, mobile, show-more buttons, etc.
{% endcomment %}

{{ 'component-show-more.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch.css' | asset_url | stylesheet_tag }}

<div id="facets-wrapper" class="facets-container{% if section.settings.filter_type == 'drawer' %} facets-container-drawer{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
  
  {# Desktop & Horizontal Facets #}
  <facet-filters-form class="facets small-hide">
    <form id="FacetFiltersForm" class="facets__form-vertical">
      <div id="FacetsWrapperDesktop" class="facets__wrapper">
        {# Algolia JS will inject filters here #}
      </div>
    </form>
  </facet-filters-form>

  {# Drawer / Mobile Facets #}
  <menu-drawer class="mobile-facets__wrapper{% if section.settings.filter_type == 'vertical' or section.settings.filter_type == 'horizontal' %} medium-hide large-up-hide{% endif %}" data-breakpoint="mobile">
    <details class="mobile-facets__disclosure disclosure-has-popup">
      <summary class="mobile-facets__open-wrapper focus-offset">
        <span class="mobile-facets__open">
          <span class="svg-wrapper">{{- 'icon-filter.svg' | inline_asset_content -}}</span>
          <span class="mobile-facets__open-label button-label">
            {{ 'products.facets.filter_button' | t }}
          </span>
        </span>
        <span tabindex="0" class="mobile-facets__close">
          <span class="svg-wrapper">{{- 'icon-close.svg' | inline_asset_content -}}</span>
        </span>
      </summary>

      <facet-filters-form>
        <form id="FacetFiltersFormMobile" class="mobile-facets">
          <div class="mobile-facets__inner gradient">
            <div id="FacetsWrapperMobile" class="mobile-facets__main has-submenu gradient">
              {# Algolia JS will inject mobile filters here #}
            </div>
            <div class="mobile-facets__footer">
              <facet-remove class="mobile-facets__clear-wrapper">
                <a href="#" class="mobile-facets__clear underlined-link">{{ 'products.facets.clear_all' | t }}</a>
              </facet-remove>
              <button type="button" class="button button--primary" onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()">
                {{ 'products.facets.apply' | t }}
              </button>
            </div>
          </div>
        </form>
      </facet-filters-form>
    </details>
  </menu-drawer>

  {# Active Facets Pills (Desktop & Mobile) #}
  <div id="ActiveFacets" class="active-facets active-facets-desktop">
    {# JS will populate active filters #}
  </div>

  {# Product Count (Desktop & Mobile) #}
  <div id="ProductCount" class="product-count light" role="status">
    <h2 class="product-count__text text-body">
      <span id="ProductCountText">
        {# JS will populate count #}
      </span>
    </h2>
    {%- render 'loading-spinner' -%}
  </div>
</div>

{# Include Algolia JS (load your algolia-facets.js) #}
<script src="{{ 'algolia-facets.js' | asset_url }}" defer></script>
